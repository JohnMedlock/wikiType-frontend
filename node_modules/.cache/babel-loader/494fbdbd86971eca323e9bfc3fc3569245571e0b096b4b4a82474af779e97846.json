{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import'./Dashboard.scss';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const[projects,setProjects]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const navigate=useNavigate();useEffect(()=>{fetchProjects();},[]);const fetchProjects=async()=>{const token=localStorage.getItem('token');if(!token){setError('Unauthorized. Please log in.');setLoading(false);return;}try{const response=await fetch('http://localhost:8080/api/project',{method:'GET',headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});if(response.ok){const data=await response.json();setProjects(data);}else if(response.status===401){setError('Session expired. Please log in again.');setTimeout(()=>navigate('/login'),3000);}else{const errorData=await response.json();setError(errorData.message||'Failed to fetch projects.');}}catch(err){console.error('Fetch Projects Error:',err);setError('An error occurred while fetching projects.');}finally{setLoading(false);}};const handleLogout=()=>{localStorage.removeItem('token');navigate('/login');};const handleDeleteProject=async projectId=>{if(!window.confirm('Are you sure you want to delete this project?'))return;const token=localStorage.getItem('token');try{const response=await fetch('http://localhost:8080/api/project',{method:'DELETE',headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'},body:JSON.stringify({id:projectId})});if(response.ok){setProjects(prevProjects=>prevProjects.filter(project=>project.id!==projectId));}else{const errorData=await response.json();alert(errorData.message||'Failed to delete the project.');}}catch(err){console.error('Delete Project Error:',err);alert('An error occurred while deleting the project.');}};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Your Projects\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Your Projects\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"create-project-button\",onClick:()=>navigate('/create-project'),children:\"Add Project\"}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-button\",onClick:handleLogout,children:\"Logout\"})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),!error&&projects.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"no-projects-message\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"You have no projects. Start one now!\"}),/*#__PURE__*/_jsx(\"button\",{className:\"create-project-button\",onClick:()=>navigate('/create-project'),children:\"Create a New Project\"})]}),!error&&projects.length>0&&/*#__PURE__*/_jsx(\"ul\",{className:\"project-list\",children:projects.map(project=>/*#__PURE__*/_jsxs(\"li\",{className:\"project-item\",children:[/*#__PURE__*/_jsx(\"h3\",{children:project.title.replace(/_/g,' ')}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Words Completed: \",project.progress]}),/*#__PURE__*/_jsxs(\"div\",{className:\"project-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"view-button\",onClick:()=>navigate(`/project/${project.id}`,{state:{completedWords:project.progress}}),children:\"View\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:()=>handleDeleteProject(project.id),children:\"Delete\"})]})]},project.id))})]});};export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Dashboard","projects","setProjects","loading","setLoading","error","setError","navigate","fetchProjects","token","localStorage","getItem","response","fetch","method","headers","ok","data","json","status","setTimeout","errorData","message","err","console","handleLogout","removeItem","handleDeleteProject","projectId","window","confirm","body","JSON","stringify","id","prevProjects","filter","project","alert","className","children","onClick","length","map","title","replace","progress","state","completedWords"],"sources":["/Users/johnmedlock/wikiType-frontend/src/components/Dashboard/Dashboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './Dashboard.scss';\n\nconst Dashboard = () => {\n  const [projects, setProjects] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    fetchProjects();\n  }, []);\n\n  const fetchProjects = async () => {\n    const token = localStorage.getItem('token');\n\n    if (!token) {\n      setError('Unauthorized. Please log in.');\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const response = await fetch('http://localhost:8080/api/project', {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setProjects(data);\n      } else if (response.status === 401) {\n        setError('Session expired. Please log in again.');\n        setTimeout(() => navigate('/login'), 3000);\n      } else {\n        const errorData = await response.json();\n        setError(errorData.message || 'Failed to fetch projects.');\n      }\n    } catch (err) {\n      console.error('Fetch Projects Error:', err);\n      setError('An error occurred while fetching projects.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    navigate('/login');\n  };\n\n  const handleDeleteProject = async (projectId) => {\n    if (!window.confirm('Are you sure you want to delete this project?')) return;\n\n    const token = localStorage.getItem('token');\n\n    try {\n      const response = await fetch('http://localhost:8080/api/project', {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ id: projectId })\n      });\n\n      if (response.ok) {\n        setProjects(prevProjects => prevProjects.filter(project => project.id !== projectId));\n      } else {\n        const errorData = await response.json();\n        alert(errorData.message || 'Failed to delete the project.');\n      }\n    } catch (err) {\n      console.error('Delete Project Error:', err);\n      alert('An error occurred while deleting the project.');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"dashboard-page\">\n        <h1>Your Projects</h1>\n        <p>Loading...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"dashboard-page\">\n      <div className=\"dashboard-header\">\n        <h1>Your Projects</h1>\n        <div className=\"header-actions\">\n          <button className=\"create-project-button\" onClick={() => navigate('/create-project')}>\n            Add Project\n          </button>\n          <button className=\"logout-button\" onClick={handleLogout}>Logout</button>\n        </div>\n      </div>\n\n      {error && <div className=\"error-message\">{error}</div>}\n\n      {!error && projects.length === 0 && (\n        <div className=\"no-projects-message\">\n          <p>You have no projects. Start one now!</p>\n          <button className=\"create-project-button\" onClick={() => navigate('/create-project')}>\n            Create a New Project\n          </button>\n        </div>\n      )}\n\n      {!error && projects.length > 0 && (\n        <ul className=\"project-list\">\n          {projects.map(project => (\n            <li key={project.id} className=\"project-item\">\n              <h3>{project.title.replace(/_/g, ' ')}</h3>\n              <p>Words Completed: {project.progress}</p>\n              <div className=\"project-actions\">\n                <button\n                  className=\"view-button\"\n                  onClick={() => navigate(`/project/${project.id}`, { state: { completedWords: project.progress } })}\n                >\n                  View\n                </button>\n                <button\n                  className=\"delete-button\"\n                  onClick={() => handleDeleteProject(project.id)}\n                >\n                  Delete\n                </button>\n              </div>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}